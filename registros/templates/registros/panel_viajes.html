{% extends "contenido/base.html" %}

{% block title %}Panel de Viajes - EcoTurismo México{% endblock %}

{% block content %}
<section class="py-8">
    <div class="flex items-center justify-between mb-6">
        <h1 class="text-2xl font-bold text-gray-900 dark:text-gray-100">Panel de gestión de viajes</h1>
        <div class="flex space-x-3">
            <a href="{% url 'exportar_viajes_csv' %}"
               class="inline-flex items-center px-4 py-2 rounded-lg border border-green-600 text-green-700 text-sm font-semibold hover:bg-green-50 dark:hover:bg-gray-800">
                Exportar CSV
            </a>
            <a href="{% url 'crear_viaje' %}"
               class="inline-flex items-center px-4 py-2 rounded-lg bg-green-600 text-white text-sm font-semibold hover:bg-green-700">
                + Nuevo viaje
            </a>
        </div>
    </div>

    {% if messages %}
        <div class="mb-4 space-y-2">
            {% for message in messages %}
                <div class="text-sm px-4 py-2 rounded-lg bg-green-50 text-green-700 dark:bg-green-900/30 dark:text-green-100">
                    {{ message }}
                </div>
            {% endfor %}
        </div>
    {% endif %}

    {% if viajes %}
    <div class="bg-white dark:bg-gray-800 rounded-2xl shadow overflow-x-auto">
        <table class="min-w-full text-sm">
            <thead class="bg-gray-50 dark:bg-gray-900/40">
                <tr>
                    <th class="px-4 py-3 text-left font-semibold text-gray-700 dark:text-gray-200">Destino</th>
                    <th class="px-4 py-3 text-left font-semibold text-gray-700 dark:text-gray-200">Lugar</th>
                    <th class="px-4 py-3 text-left font-semibold text-gray-700 dark:text-gray-200">Salida</th>
                    <th class="px-4 py-3 text-left font-semibold text-gray-700 dark:text-gray-200">Regreso</th>
                    <th class="px-4 py-3 text-left font-semibold text-gray-700 dark:text-gray-200">Costo</th>
                    <th class="px-4 py-3 text-left font-semibold text-gray-700 dark:text-gray-200">Creado</th>
                    <th class="px-4 py-3"></th>
                </tr>
            </thead>
            <tbody class="divide-y divide-gray-100 dark:divide-gray-700">
                {% for viaje in viajes %}
                <tr class="hover:bg-gray-50 dark:hover:bg-gray-900/40">
                    <td class="px-4 py-3 text-gray-900 dark:text-gray-100">{{ viaje.destino }}</td>
                    <td class="px-4 py-3 text-gray-700 dark:text-gray-200">{{ viaje.lugar }}</td>
                    <td class="px-4 py-3 text-gray-700 dark:text-gray-200">{{ viaje.fecha_salida|date:"d/m/Y" }}</td>
                    <td class="px-4 py-3 text-gray-700 dark:text-gray-200">{{ viaje.fecha_regreso|date:"d/m/Y" }}</td>
                    <td class="px-4 py-3 text-green-700 dark:text-green-400 font-semibold">${{ viaje.costo }}</td>
                    <td class="px-4 py-3 text-gray-500 text-xs">{{ viaje.created|date:"d/m/Y H:i" }}</td>
                    <td class="px-4 py-3 text-right space-x-2">
                        <a href="{% url 'editar_viaje' viaje.id %}"
                           class="inline-flex items-center text-xs font-semibold text-blue-600 hover:text-blue-800">
                            Editar
                        </a>
                        <a href="{% url 'eliminar_viaje' viaje.id %}"
                           class="inline-flex items-center text-xs font-semibold text-red-600 hover:text-red-800">
                            Eliminar
                        </a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
        <div class="bg-white dark:bg-gray-800 rounded-2xl shadow p-6 text-sm text-gray-600 dark:text-gray-300">
            No hay viajes registrados todavía. Usa el botón "Nuevo viaje" para crear el primero.
        </div>
    {% endif %}
</section>
{% endblock %}
